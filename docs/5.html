<!DOCTYPE html>  <html> <head>   <title>5.js</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               5.js             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <h3>Collections</h3>

<p>So far we've only ever had to deal with 1 model instance
at a time, but in any sufficiently complex application,
you are going to start having a <code>Collection</code> of models that you'll
need to manage.</p>

<p>In our Todo app example so far, we've put off handling more than
1 todo at a time to try and keep it simple.  But our users are getting
restless and have taken to twitter and started the #morethanonetodo
hashtag so, unless we want to start losing users, we have to support
multiple todos.</p>

<p>Backbone provides the Collection class, which is on the same level of 
View and Model, to handle this exact problem.  Collections are just an
ordered set of model instances that all belong to the same model class.</p>

<p>So in our Todos app, we have already defined a model for a <code>TodoItem</code></p>             </td>             <td class="code">               <div class="highlight"><pre><span class="kd">var</span> <span class="nx">TodoItem</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Model</span><span class="p">.</span><span class="nx">extend</span><span class="p">({});</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>To define a Collection class that manages a set of <code>TodoItem's</code>, all
we have to do is extend from <code>Backbone.Collection</code> and declare
the collection's corresponding model class, like this:</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="kd">var</span> <span class="nx">TodoItems</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Collection</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">model</span><span class="o">:</span> <span class="nx">TodoItem</span>
<span class="p">});</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p><strong>Note:</strong></p>

<pre><code> Notice we named the collection class TodoItems.  It's
 only a convention to name the collection class the plural
 of the model it represents.  You could just as easily
 name it something like Todos or TodoCollection. 
</code></pre>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>Now we can create a collection instance like so</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="kd">var</span> <span class="nx">todoItems</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TodoItems</span><span class="p">();</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>You can access the array of model instances in the collection by
calling <code>todoItems.models</code> but most of the time you won't need access
directly to the <code>models</code> array.  Instead, you interact with the <code>models</code>
using the functions the collection exposes.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>For example, you can add a model instance to the collection using <code>add</code></p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">todoItems</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="c1">// 0</span>
<span class="kd">var</span> <span class="nx">todoItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TodoItem</span><span class="p">();</span>
<span class="nx">todoItems</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">todoItem</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">todoItems</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="c1">// 1</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>You can also remove a model instance using the <code>remove</code> function</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">todoItems</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">todoItem</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">todoItems</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="c1">// 0</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>You can retrieve a single model instance from the collection
a couple of ways.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>Pass the index of the model you want to retrieve with <code>at</code></p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">todoItems</span><span class="p">.</span><span class="nx">at</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c1">// is todoItem</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>Pass in the id of the model instance to <code>get</code></p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">todoItem</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span> <span class="c1">// 1</span>
<span class="nx">todoItems</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c1">// is todoItem</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <h4>Bulk Populating</h4>

<p>There are two easy ways <code>Backbone.Collections</code> give you to
populate a collection instance with many model instances.</p>

<p>The first one is <code>reset</code>.  <code>reset</code> expects an array of JSON objects, 
with each JSON object use to create a single model instance.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p>Using <code>reset</code> to populate <code>todoItems</code> with 3 <code>TodoItem</code> instances</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="kd">var</span> <span class="nx">todos</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span><span class="nx">description</span><span class="o">:</span> <span class="s1">&#39;Pick up milk.&#39;</span><span class="p">,</span> <span class="nx">status</span><span class="o">:</span> <span class="s1">&#39;incomplete&#39;</span><span class="p">},</span>
  <span class="p">{</span><span class="nx">description</span><span class="o">:</span> <span class="s1">&#39;Get a car wash&#39;</span><span class="p">,</span> <span class="nx">status</span><span class="o">:</span> <span class="s1">&#39;incomplete&#39;</span><span class="p">},</span>
  <span class="p">{</span><span class="nx">description</span><span class="o">:</span> <span class="s1">&#39;Learn Backbone&#39;</span><span class="p">,</span> <span class="nx">status</span><span class="o">:</span> <span class="s1">&#39;incomplete&#39;</span><span class="p">}</span>
<span class="p">]</span>

<span class="nx">todoItems</span><span class="p">.</span><span class="nx">reset</span><span class="p">(</span><span class="nx">todos</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">todoItems</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="c1">// 3</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 